(this.webpackJsonpusers_proj=this.webpackJsonpusers_proj||[]).push([[0],{18:function(e,t,n){e.exports={header:"Header_header__2yogj",list:"Header_list__3P-lx"}},36:function(e,t,n){e.exports={main:"Main_main__3mAp_"}},39:function(e,t,n){e.exports=n(68)},44:function(e,t,n){},45:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),c=n.n(l),u=(n(44),n(3)),o=n(4),i=n(6),s=n(5),p=(n(45),n(36)),m=n.n(p),h=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:m.a.main},"Main")}}]),n}(a.Component),E=n(13),f=n(18),d=n.n(f),b=n(12),v=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).logout=function(){e.props.logout()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.isAuth?r.a.createElement("ul",{className:d.a.list},r.a.createElement("li",null,r.a.createElement("button",{onClick:this.logout},"\u0412\u044b\u0439\u0442\u0438"))):r.a.createElement("ul",{className:d.a.list},r.a.createElement("li",null,r.a.createElement(b.b,{to:"/login"},"\u041b\u043e\u0433\u0438\u043d")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/registration"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")));return r.a.createElement("div",{className:d.a.header},r.a.createElement("ul",{className:d.a.list},r.a.createElement("li",null,"Header"),r.a.createElement("li",null,this.props.isAuth?"\u0414\u0430":"\u041d\u0435\u0442"),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/users"},"\u041f\u043e\u043b\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"))),e)}}]),n}(a.Component),j=n(15),O=n(21),g=n.n(O),y=O.create({withCredentials:!0}),A=function(){return y.get("/api/users").then((function(e){return e.data}))},_=function(e){return y.delete("/api/users/".concat(e)).then((function(e){return e.data}))},I=function(e,t){return y.post("/api/login",{login:e,password:t})},w=function(){return y.delete("/api/login")},k=function(){return y.get("/api/login")},C={isAuth:!1},S=function(e){return{type:"SET_AUTH",auth:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH":return Object(j.a)(Object(j.a)({},e),{},{isAuth:t.auth});default:return e}},U=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement(v,this.props)}}]),n}(a.Component),T=Object(E.b)((function(e){return{isAuth:e.auth.isAuth}}),{logout:function(){return function(e){w().then((function(){e(S(!1))}))}}})(U),D=n(2),M=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).loginInp=r.a.createRef(),a.emailInp=r.a.createRef(),a.passInp=r.a.createRef(),a.passRepeatInp=r.a.createRef(),a.register=function(){var e={login:a.loginInp.current.value,email:a.emailInp.current.value,passInp:a.passInp.current.value,passRepeatInp:a.passRepeatInp.current.value};g.a.post("/registrate",e).then((function(e){1===e.data.success?a.setState({redirect:!0}):alert("err")})).catch((function(e){alert("negood")}))},a.state={redirect:!1},a}return Object(o.a)(n,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(D.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("td",null,r.a.createElement("input",{placeholder:"\u041b\u043e\u0433\u0438\u043d",ref:this.loginInp}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,r.a.createElement("input",{placeholder:"Email",ref:this.emailInp}))),r.a.createElement("tr",null,r.a.createElement("td",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("td",null,r.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",ref:this.passInp}))),r.a.createElement("tr",null,r.a.createElement("td",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("td",null,r.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",ref:this.passRepeatInp})))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("button",{onClick:this.register},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))))}}]),n}(a.Component),N=n(14),x=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).delete=function(t){e.props.deleteUser(t)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"render",value:function(){var e=this,t=null;return this.props.users&&(t=this.props.users.map((function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t.user_id),r.a.createElement("td",null,t.login),r.a.createElement("td",null,t.email),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){e.delete(t.user_id)}},"Delete")))}))),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Login"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t)))}}]),n}(a.Component),H={users:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(j.a)(Object(j.a)({},e),{},{users:t.users});case"DELETE_USER":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.filter((function(e){return e.user_id!==t.user_id}))});default:return e}},B=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement(x,this.props)}}]),n}(a.Component),J=Object(N.d)(Object(E.b)((function(e){return{isAuth:e.auth.isAuth,users:e.users.users}}),{getUsers:function(){return function(e){A().then((function(t){e(function(e){return{type:"SET_USERS",users:e}}(t.data))}))}},deleteUser:function(e){return function(t){_(e).then((function(){t({type:"DELETE_USER",user_id:e})}))}}}),(function(e){return function(t){Object(i.a)(a,t);var n=Object(s.a)(a);function a(){return Object(u.a)(this,a),n.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(D.a,{to:"/login"})}}]),a}(r.a.Component)}))(B),W=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).loginInp=r.a.createRef(),e.passInp=r.a.createRef(),e.enter=function(){e.props.login(e.loginInp.current.value,e.passInp.current.value)},e}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"\u0412\u043e\u0439\u0442\u0438"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("td",null,r.a.createElement("input",{ref:this.loginInp}))),r.a.createElement("tr",null,r.a.createElement("td",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("td",null,r.a.createElement("input",{ref:this.passInp,type:"password"})))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("button",{onClick:this.enter},"\u0412\u043e\u0439\u0442\u0438"))))))}}]),n}(a.Component),P=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement(W,this.props)}}]),n}(a.Component),$=Object(E.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t){return function(n){I(e,t).then((function(e){1===e.data.success&&n(S(!0))}))}}})(P),q=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.props.getMyAuth()},e}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(T,null)),r.a.createElement("main",null,r.a.createElement(D.b,{path:"/registration",component:M}),r.a.createElement(D.b,{path:"/users",component:J}),r.a.createElement(D.b,{path:"/login",component:$}),r.a.createElement(D.b,{path:"/",component:h,exact:!0})))}}]),n}(r.a.Component),z=Object(E.b)((function(e){return{isAuth:e.auth.isAuth}}),{getMyAuth:function(){return function(e){k().then((function(t){e(S(1===t.data.success))}))}}})(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=n(38),G=Object(N.c)({users:L,auth:R}),K=Object(N.e)(G,Object(N.a)(F.a));window.store=K;var Q=K;c.a.render(r.a.createElement(b.a,null,r.a.createElement(E.a,{store:Q},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.20d6ade5.chunk.js.map